<div class="main-layout" [class.sidebar-open]="sidebarOpen">
  <app-sidebar [open]="sidebarOpen" (closed)="closeSidebar()"></app-sidebar>
  <app-top-bar (toggleSidebar)="toggleSidebar()" [sidebarOpen]="sidebarOpen"></app-top-bar>

  <!-- Main Content -->
  <main class="main-content">
    <section class="workspaces">
      <div class="workspace-header">
        <h2>Workspaces</h2>
        <button class="create-btn" (click)="onCreateWorkspace()">
          <i class="fas fa-plus"></i> Create Workspace
        </button>
      </div>

      <div *ngIf="error" class="error">{{ error }}</div>

      <div class="workspace-grid">
        <article class="workspace-frame" *ngFor="let ws of workspaces; let i = index" (click)="openWorkspace(ws)">
          <div class="frame-top">
            <i class="fas fa-folder frame-icon" aria-hidden="true"></i>
            <span class="frame-type">{{ ws.type || 'Workspace' }}</span>
          </div>

          <div class="frame-body" (click)="$event.stopPropagation()">
            <h3 class="frame-title">{{ ws.name }}</h3>

            <!-- description: truncated by default, expands when toggled -->
            <p class="frame-desc" [class.expanded]="expanded[i]">{{ ws.description || 'No description' }}</p>

            <!-- toggle button only when there's a description longer than 1 line -->
            <button *ngIf="ws.description" type="button" class="desc-toggle" (click)="toggleExpand(i)">
              {{ expanded[i] ? 'Show less' : 'Show more' }}
            </button>
          </div>
        </article>
      </div>
    </section>
  </main>
</div>
